variable "blobs" {
  description = "Map of blobs to create"
  type = map(object({
    storage_container_name = string
    type                   = string
    blob_source            = string
  }))
}


blobs = {
  blob1 = {
    storage_container_name = "container-a"
    type                   = "Block"
    blob_source            = "files/file1.txt"
  }
  blob2 = {
    storage_container_name = "container-b"
    type                   = "Block"
    blob_source            = "files/file2.txt"
  }
}



module "storage_blob" {
  for_each = var.blobs

  source  = "cps-terraform.anthem.com/<ORG-NAME>/terraform-azurerm-storage-blob/azurerm"
  version = "1.0.0"

  name                   = each.key
  storage_account_name   = module.storage_account_sctest.name
  storage_container_name = each.value.storage_container_name
  type                   = each.value.type
  blob_source            = each.value.blob_source

  # encryption_scope = module.storage_encryption_scope_sctest.name

  depends_on = [module.storage_container]
}




module "storage_blob" {
  source                 = "cps-terraform.anthem.com/<ORG-NAME>/terraform-azurerm-storage-blob/azurerm"
  version                = "1.0.0"

  name                   = ""
  storage_account_name   = module.storage_account_sctest.name
  storage_container_name = "" # Storage COntainer's name
  type                   = "Block"
  blob_source            = ""
  # encryption_scope = module.storage_encryption_scope_sctest.name
  depends_on = [ module.storage_container]
}
